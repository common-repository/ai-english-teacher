"use strict";const aiet_openaiApiKey=aietScriptData.api,aiet_openaiEndpoint="https://api.openai.com/v1/completions",aiet_grammarForm=document.getElementById("aiet_grammarForm"),aiet_correctGrammar=document.getElementById("aiet_correct_grammar"),aiet_rephraseSentences=document.getElementById("aiet_rephrase_sentences");function aiet_checkGrammar(e){const t=document.getElementById("aiet_inputText").value,n=document.getElementById("aiet_output");if(""==t)return aiet_outputDiv.innerHTML="Please enter text.";if(n.innerHTML="Please wait...","correct"==e)var a="Correct this to standard English:\n\n"+t;if("rephrase"==e)a="Rephrase Sentences:\n\n"+t;const i={model:"text-davinci-003",prompt:a,temperature:.7,max_tokens:60,top_p:1,frequency_penalty:0,presence_penalty:0};fetch(aiet_openaiEndpoint,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "+aiet_openaiApiKey},body:JSON.stringify(i)}).then((e=>e.json())).then((e=>{const t=e.choices[0].text;n.innerHTML=t})).catch((e=>{console.error("Error:",e),n.innerHTML="Error occurred: "+e}))}aiet_correctGrammar.addEventListener("click",(function(e){e.preventDefault(),aiet_checkGrammar("correct"),aiet_rephraseSentences.style.opacity="1",aiet_correctGrammar.style.opacity="0.7"})),aiet_rephraseSentences.addEventListener("click",(function(e){e.preventDefault(),aiet_checkGrammar("rephrase"),aiet_rephraseSentences.style.opacity="0.7",aiet_correctGrammar.style.opacity="1"}));const aiet_button=document.getElementById("aiet_myButton"),aiet_popup=document.getElementById("aiet_popup"),aiet_popupText=document.getElementById("aiet_popupText"),aiet_closeButton=document.getElementById("aiet_closeButton"),aiet_inputText=document.getElementById("aiet_inputText");document.body.addEventListener("mouseup",(function(e){const t=window.getSelection(),n=e.target;if("Range"!==t.type||n===aiet_popup||aiet_popup.contains(n))aiet_button.style.display="none";else{t.toString();aiet_button.style.display="block",aiet_button.style.left=e.pageX+"px",aiet_button.style.top=e.pageY+"px"}})),aiet_button.addEventListener("click",(function(e){aiet_button.style.display="none";const t=window.getSelection().toString();""!==t&&(aiet_inputText.value=t,aiet_popup.style.display="block")})),aiet_closeButton.addEventListener("click",(function(e){aiet_popup.style.display="none";document.getElementById("aiet_output").innerHTML="",aiet_rephraseSentences.style.opacity="1",aiet_correctGrammar.style.opacity="1"}));